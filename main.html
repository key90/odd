<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Почему Ты — моя судьба</title>
<style>
  body {
    margin: 0; padding: 0; font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #f8e7e7, #f4f0fa);
    color: #333;
    min-height: 100vh;
    display: flex; flex-direction: column;
  }
  header {
    background: #4a3f6f; color: #fff; text-align: center;
    padding: 20px 10px; font-size: 1.5rem; font-weight: 700; letter-spacing: 0.05em;
    box-shadow: 0 2px 5px rgba(0,0,0,0.15);
  }
  nav {
    display: flex; justify-content: space-around;
    background: #6b5b95; box-shadow: 0 3px 8px rgba(0,0,0,0.2);
  }
  nav button {
    flex: 1; padding: 14px 0; background: none; border: none;
    color: #ddd; font-weight: 600; font-size: 1rem; cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  nav button:hover {
    background: #8c7fcf; color: #fff;
  }
  nav button.active {
    background: #d6c4f0; color: #4a3f6f; font-weight: 700;
  }
  main {
    flex-grow: 1; padding: 25px 20px; max-width: 430px; margin: 0 auto;
  }
  section {
    display: none;
    animation: fadeInUp 0.6s ease forwards;
  }
  section.active {
    display: block;
  }
  @keyframes fadeInUp {
    0% {opacity: 0; transform: translateY(30px);}
    100% {opacity: 1; transform: translateY(0);}
  }
  h2 {
    color: #4a3f6f; font-size: 1.6rem; margin-bottom: 15px;
    border-bottom: 2px solid #6b5b95; padding-bottom: 5px;
  }
  p {
    font-size: 1.1rem; line-height: 1.5; margin-bottom: 15px;
  }
  .highlight {
    color: #8c7fcf; font-weight: 700;
  }
  form {
    margin-top: 30px; display: flex; justify-content: center; gap: 20px;
  }
  form button {
    background-color: #6b5b95; border: none; color: white;
    padding: 14px 26px; font-size: 1.1rem; border-radius: 30px;
    cursor: pointer; font-weight: 700;
    box-shadow: 0 4px 12px rgba(107,91,149,0.5);
    transition: background-color 0.3s ease, transform 0.2s ease;
    user-select: none;
  }
  form button:hover {
    background-color: #8c7fcf;
    transform: scale(1.05);
  }
  form button:active {
    transform: scale(0.95);
  }
  #responseMessage {
    margin-top: 20px; text-align: center;
    font-weight: 700; color: #6b5b95; min-height: 24px;
  }
  img.section-image {
    width: 100%; border-radius: 12px; margin-bottom: 15px;
    box-shadow: 0 5px 15px rgba(107,91,149,0.3);
  }
  /* Модальное окно */
  #musicModal {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(74, 63, 111, 0.95);
    color: #f4f0fa;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    font-size: 1.4rem;
    padding: 20px;
    text-align: center;
    user-select: none;
  }
  #musicModal button {
    margin-top: 30px;
    padding: 14px 36px;
    font-size: 1.3rem;
    border: none;
    border-radius: 40px;
    background-color: #8c7fcf;
    color: #fff;
    cursor: pointer;
    font-weight: 700;
    box-shadow: 0 5px 15px rgba(140,127,207,0.6);
    transition: background-color 0.3s ease, transform 0.2s ease;
  }
  #musicModal button:hover {
    background-color: #6b5b95;
    transform: scale(1.05);
  }
  #musicModal button:active {
    transform: scale(0.95);
  }
  @media (max-width: 430px) {
    body {font-size: 16px;}
    nav button {font-size: 0.9rem; padding: 12px 0;}
    main {padding: 20px 12px;}
    h2 {font-size: 1.4rem;}
    p {font-size: 1rem;}
    form button {padding: 12px 20px; font-size: 1rem;}
    #musicModal {
      font-size: 1.1rem;
    }
    #musicModal button {
      font-size: 1.1rem;
      padding: 12px 28px;
    }
  }
</style>
</head>
<body>

<header>Почему Ты — моя судьба</header>

<nav>
  <button data-target="home" class="active" aria-label="Главная страница">Главная</button>
  <button data-target="flight" aria-label="Наша встреча">Наша встреча</button>
  <button data-target="doctor" aria-label="Твоя сила">Твоя сила</button>
  <button data-target="dreams" aria-label="Мечты вместе">Мечты вместе</button>
  <button data-target="proposal" aria-label="Моё предложение">Моё предложение</button>
</nav>

<main>
  <section id="home" class="active" tabindex="0" aria-live="polite">
    <h2>Почему именно ты?</h2>
    <img class="section-image" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80" alt="Романтичный пейзаж закат" />
    <p>Мы не так давно знакомы, но уже сейчас я понимаю — <span class="highlight">ты та самая</span>, с кем я хочу идти по жизни рядом. Встреча с тобой — знак судьбы, который не хочется упускать.</p>
  </section>

  <section id="flight" tabindex="0" aria-live="polite">
    <h2>Наша встреча в самолёте</h2>
    <img class="section-image" src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=800&q=80" alt="Самолёт в небе" />
    <p>Помнишь, как мы сидели рядом в самолёте? Эта случайность изменила всё. Мгновения, когда мы разговаривали, заставили меня поверить в судьбу и уникальность нашей встречи.</p>
  </section>

  <section id="doctor" tabindex="0" aria-live="polite">
    <h2>Твоя сила и забота как врача</h2>
    <img class="section-image" src="https://images.unsplash.com/photo-1580281658628-6ef3a9b18268?auto=format&fit=crop&w=800&q=80" alt="Врач заботливо держит руки пациента" />
    <p>Ты — врач эндокринолог, и это значит, что каждый день ты даришь людям надежду и здоровье. Твоя сила в заботе, терпении и стремлении сделать этот мир лучше вдохновляет меня.</p>
  </section>

  <section id="dreams" tabindex="0" aria-live="polite">
    <h2>Наши мечты и планы</h2>
    <img class="section-image" src="https://images.unsplash.com/photo-1494526585095-c41746248156?auto=format&fit=crop&w=800&q=80" alt="Пара держится за руки на берегу" />
    <p>Я хочу, чтобы мы вместе мечтали и строили планы — о семье, путешествиях, поддержке и счастье. Вместе нам под силу всё.</p>
  </section>

  <section id="proposal" tabindex="0" aria-live="polite">
    <h2>Моё предложение</h2>
    <img class="section-image" src="https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?auto=format&fit=crop&w=800&q=80" alt="Обручальные кольца на фоне" />
    <p>Я не знаю, как всё сложится, но хочу попробовать идти по жизни с тобой рядом.</p>
    <p>Ты — та, с кем я хочу делить радость и трудности, смеяться и мечтать.</p>
    <p><strong>Выйдешь ли ты за меня замуж?</strong></p>

    <form id="proposalForm" action="https://formsubmit.co/courageous132@gmsil.com" method="POST" novalidate>
      <input type="hidden" name="answer" id="answer" value="" />
      <input type="hidden" name="_subject" value="Ответ с сайта - предложение" />
      <input type="hidden" name="_captcha" value="false" />
      <button type="submit" data-answer="Да" aria-label="Ответ Да">Да</button>
      <button type="submit" data-answer="Нет" aria-label="Ответ Нет">Нет</button>
      <button type="submit" data-answer="Может быть" aria-label="Ответ Может быть">Может быть</button>
    </form>
    <div id="responseMessage" role="alert" aria-live="polite"></div>

    <audio id="romanticMusic" src="https://cdn.pixabay.com/download/audio/2022/03/25/audio_9c6a6d9c62.mp3?filename=romantic-piano-14129.mp3" preload="auto" loop></audio>
  </section>
</main>

<!-- Модал с подтверждением для музыки -->
<div id="musicModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc" hidden>
  <div>
    <h2 id="modalTitle">Сейчас будет чудо, ты готова?</h2>
    <button id="startMusicBtn" aria-label="Включить музыку и продолжить">Вперед</button>
  </div>
</div>

<script>
  const navButtons = document.querySelectorAll('nav button');
  const sections = document.querySelectorAll('main section');
  const musicModal = document.getElementById('musicModal');
  const startMusicBtn = document.getElementById('startMusicBtn');
  const music = document.getElementById('romanticMusic');
  const proposalSectionId = 'proposal';

  // Управление активными вкладками и секциями
  navButtons.forEach(button => {
    button.addEventListener('click', () => {
      const target = button.getAttribute('data-target');

      // Если вкладка уже активна - ничего не делать
      if (button.classList.contains('active')) return;

      // Убираем активность со всех кнопок и секций
      navButtons.forEach(btn => btn.classList.remove('active'));
      sections.forEach(sec => sec.classList.remove('active'));

      // Активируем кнопку и секцию
      button.classList.add('active');
      const activeSection = document.getElementById(target);
      activeSection.classList.add('active');
      activeSection.focus();

      // Если это вкладка "Моё предложение" - показать модал подтверждения музыки
      if (target === proposalSectionId) {
        // Показать модал и заблокировать музыку
        music.pause();
        music.currentTime = 0;
        music.volume = 0;
        musicModal.hidden = false;
      } else {
        // Если уходим с предложения, скрываем модал и останавливаем музыку
        music.pause();
        music.currentTime = 0;
        musicModal.hidden = true;
      }
    });
  });

  // При клике на кнопку "Вперед" запускаем музыку плавно и скрываем модал
  startMusicBtn.addEventListener('click', () => {
    musicModal.hidden = true;
    music.volume = 0;
    music.play();

    // Плавно увеличить громкость
    let vol = 0;
    const fadeIn = setInterval(() => {
      if (vol < 1) {
        vol += 0.02;
        music.volume = Math.min(vol, 1);
      } else {
        clearInterval(fadeIn);
      }
    }, 100);
  });

  // Обработка формы с ответом
  const proposalForm = document.getElementById('proposalForm');
  const answerInput = document.getElementById('answer');
  const responseMessage = document.getElementById('responseMessage');

  proposalForm.addEventListener('submit', e => {
    e.preventDefault();
    const clickedButton = e.submitter;
    const answer = clickedButton.getAttribute('data-answer');
    answerInput.value = answer;

    // Отправляем через fetch чтобы не перезагружать страницу
    fetch(proposalForm.action, {
      method: proposalForm.method,
      body: new FormData(proposalForm),
      headers: { 'Accept': 'application/json' },
    }).then(response => {
      if (response.ok) {
        responseMessage.textContent = 'Спасибо за ответ! Я очень ценю твою искренность.';
        proposalForm.reset();
      } else {
        responseMessage.textContent = 'Что-то пошло не так, попробуй ещё раз.';
      }
    }).catch(() => {
      responseMessage.textContent = 'Ошибка сети. Попробуй позже.';
    });
  });
</script>

</body>
</html>
